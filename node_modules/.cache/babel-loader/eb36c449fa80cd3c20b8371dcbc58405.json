{"ast":null,"code":"import { usersAPI } from \"../api/api\"; //****************--USing Users API--> https://social-network.samuraijs.com/  --***********/\n\nconst FOLLOW = \"FOLLOW\";\nconst UNFOLLOW = \"UNFOLLOW\";\nconst SET_USERS = \"SET_USERS\";\nconst SET_CURRENT_PAGE = \"SET_CURRENT_PAGE\";\nconst SET_TOTAL_USERS_COUNT = \"SET_TOTAL_USERS_COUNT\";\nconst TOGGLE_IS_FETCHING = \"TOGGLE_IS_FETCHING\";\nconst FOLLOWING_IN_PROGRESS = \"FOLLOWING_IN_PROGRESS\";\nlet initialState = {\n  users: [],\n  pageSize: 10,\n  totalUsersCount: 0,\n  currentPage: 1,\n  isFetching: false,\n  followingInProgress: []\n};\n\nconst usersReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case FOLLOW:\n      return { ...state,\n        users: state.users.map(userItem => {\n          if (action.userId === userItem.id) {\n            return { ...userItem,\n              followed: true\n            };\n          }\n\n          return userItem;\n        })\n      };\n\n    case UNFOLLOW:\n      {\n        return { ...state,\n          users: state.users.map(userItem => {\n            if (action.userId === userItem.id) {\n              return { ...userItem,\n                followed: false\n              };\n            }\n\n            return userItem;\n          })\n        };\n      }\n\n    case SET_USERS:\n      {\n        //users incolla due arrays users essistenti(...state.users) con users arrivati(...action.users)->  {...state,users:[...state.users,...action.users]}\n        return { ...state,\n          users: [...action.users]\n        };\n      }\n\n    case SET_CURRENT_PAGE:\n      {\n        return { ...state,\n          currentPage: action.currentPage\n        };\n      }\n\n    case SET_TOTAL_USERS_COUNT:\n      {\n        return { ...state,\n          totalUsersCount: action.totalUsersCount\n        };\n      }\n\n    case TOGGLE_IS_FETCHING:\n      {\n        return { ...state,\n          isFetching: action.isFetching\n        };\n      }\n\n    case FOLLOWING_IN_PROGRESS:\n      {\n        return { ...state,\n          followingInProgress: action.isFetching ? [...state.followingInProgress, action.userId] : state.followingInProgress.filter(id => id != action.userId)\n        };\n      }\n\n    default:\n      return state;\n  }\n}; //****-ACTIONS-****\n\n\nexport const followSuccess = userId => {\n  return {\n    type: FOLLOW,\n    userId: userId\n  };\n};\nexport const unfollowSuccess = userId => {\n  return {\n    type: UNFOLLOW,\n    userId: userId\n  };\n};\nexport const setUsers = users => {\n  return {\n    type: SET_USERS,\n    users: users\n  };\n};\nexport const setCurrentPage = currentPage => {\n  return {\n    type: SET_CURRENT_PAGE,\n    currentPage: currentPage\n  };\n};\nexport const setTotalUsersCount = totalCount => {\n  return {\n    type: SET_TOTAL_USERS_COUNT,\n    totalUsersCount: totalCount\n  };\n};\nexport const toggleIsFetching = isFetching => {\n  return {\n    type: TOGGLE_IS_FETCHING,\n    isFetching\n  };\n};\nexport const toggleFollowingInProgress = (isFetching, userId) => {\n  return {\n    type: FOLLOWING_IN_PROGRESS,\n    isFetching,\n    userId\n  };\n}; //****-THUNK--CREATORS-****\n\nexport const getUsers = (currentPage, pageSize) => {\n  //****-THUNK-****\n  return dispatch => {\n    dispatch(toggleIsFetching(true));\n    usersAPI.getUsers(currentPage, pageSize).then(data => {\n      dispatch(toggleIsFetching(false));\n      dispatch(setUsers(data.items));\n      dispatch(setTotalUsersCount(data.totalCount));\n    });\n  };\n};\nexport const follow = userId => {\n  return dispatch => {\n    usersAPI.follow(userId).then(data => {\n      if (data.resultCode == 0) {\n        dispatch(followSuccess(userId));\n        dispatch(toggleFollowingInProgress(false, userId));\n      }\n    });\n  };\n};\nexport const unfollow = userId => {\n  return dispatch => {\n    usersAPI.unfollow(userId).then(data => {\n      if (data.resultCode == 0) {\n        dispatch(unfollowSuccess(userId));\n        dispatch(toggleFollowingInProgress(false, userId));\n      }\n    });\n  };\n};\nexport default usersReducer;","map":{"version":3,"sources":["/Users/katsiarynabulauskaya/Sites/Maksim/lessons/Les2/it-kamasutra2020-main/src/redux/users-reducer.js"],"names":["usersAPI","FOLLOW","UNFOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_TOTAL_USERS_COUNT","TOGGLE_IS_FETCHING","FOLLOWING_IN_PROGRESS","initialState","users","pageSize","totalUsersCount","currentPage","isFetching","followingInProgress","usersReducer","state","action","type","map","userItem","userId","id","followed","filter","followSuccess","unfollowSuccess","setUsers","setCurrentPage","setTotalUsersCount","totalCount","toggleIsFetching","toggleFollowingInProgress","getUsers","dispatch","then","data","items","follow","resultCode","unfollow"],"mappings":"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","sourcesContent":["import { usersAPI } from \"../api/api\";\n\n//****************--USing Users API--> https://social-network.samuraijs.com/  --***********/\nconst FOLLOW = \"FOLLOW\";\nconst UNFOLLOW = \"UNFOLLOW\";\nconst SET_USERS = \"SET_USERS\";\nconst SET_CURRENT_PAGE =\"SET_CURRENT_PAGE\";\nconst SET_TOTAL_USERS_COUNT = \"SET_TOTAL_USERS_COUNT\";\nconst TOGGLE_IS_FETCHING = \"TOGGLE_IS_FETCHING\"\nconst FOLLOWING_IN_PROGRESS = \"FOLLOWING_IN_PROGRESS\";\n\nlet initialState = {\n  users: [],\n  pageSize:10,\n  totalUsersCount:0,\n  currentPage:1,\n  isFetching:false,\n  followingInProgress:[],\n};\nconst usersReducer = (state = initialState, action) => {\n\n  switch (action.type) {\n   \n    case FOLLOW:\n      \n     return{\n       ...state,\n        users:state.users.map(\n          (userItem)=>{   \n            if(action.userId === userItem.id){\n              return {...userItem,followed:true}\n            }\n            return userItem;\n          }\n        )\n      };\n\n    case UNFOLLOW:{\n      \n      return{\n        ...state,\n         users:state.users.map(\n           (userItem)=>{   \n             if(action.userId === userItem.id){\n               return {...userItem,followed:false}\n             }\n             return userItem;\n           }\n         )\n       };\n      }\n      case SET_USERS:{\n        //users incolla due arrays users essistenti(...state.users) con users arrivati(...action.users)->  {...state,users:[...state.users,...action.users]}\n        return{...state,users:[...action.users]};\n\n      }\n      case SET_CURRENT_PAGE:{\n        return{...state,currentPage:action.currentPage};\n        \n      }\n      case SET_TOTAL_USERS_COUNT:{\n        return {...state,totalUsersCount:action.totalUsersCount};\n      }\n      case TOGGLE_IS_FETCHING:{\n\n        return{...state,isFetching:action.isFetching}; \n\n      }\n      case FOLLOWING_IN_PROGRESS:{\n        return{\n          ...state,\n          followingInProgress: action.isFetching \n          ?[...state.followingInProgress,action.userId]\n          :state.followingInProgress.filter(id => id != action.userId)\n        }\n      }\n         \n    default:\n      return state;\n  }\n};\n//****-ACTIONS-****\nexport const followSuccess = (userId) => {\n  return { type: FOLLOW, userId:userId };\n};\n\nexport const unfollowSuccess = (userId) => {\n  return { type: UNFOLLOW,userId:userId };\n};\n\nexport const setUsers = (users) => {\n  return { type: SET_USERS,users:users };\n};\n\nexport const setCurrentPage = (currentPage) => {\n  return { type: SET_CURRENT_PAGE,currentPage:currentPage };\n};\n\nexport const setTotalUsersCount = (totalCount) => {\n  return { type: SET_TOTAL_USERS_COUNT,totalUsersCount:totalCount };\n};\n\n\nexport const toggleIsFetching = (isFetching)=>{\n  return { type:TOGGLE_IS_FETCHING,isFetching};\n}\n\nexport const toggleFollowingInProgress = (isFetching,userId)=>{\n  return {type:FOLLOWING_IN_PROGRESS,isFetching,userId};\n}\n\n//****-THUNK--CREATORS-****\nexport const getUsers = (currentPage,pageSize)=>{\n  //****-THUNK-****\n  return (dispatch)=>{\n    dispatch(toggleIsFetching(true));\n\n    usersAPI.getUsers(currentPage,pageSize).then((data) => {\n      dispatch(toggleIsFetching(false));\n      dispatch(setUsers(data.items));\n      dispatch(setTotalUsersCount(data.totalCount));\n       \n    });\n  }; \n}\n\nexport const follow = (userId)=>{\n  return (dispatch)=>{\n    usersAPI.follow(userId).then((data) => {\n            \n      if (data.resultCode == 0) {\n        dispatch(followSuccess(userId));\n        dispatch(toggleFollowingInProgress(false,userId));\n      }\n            \n    });\n  }; \n}\n\nexport const unfollow = (userId)=>{\n  return (dispatch)=>{\n    usersAPI.unfollow(userId).then((data) => {\n            \n      if (data.resultCode == 0) {\n        \n        dispatch(unfollowSuccess(userId));\n        dispatch(toggleFollowingInProgress(false,userId));\n      }\n            \n    });\n  }; \n}\n\nexport default usersReducer;\n"]},"metadata":{},"sourceType":"module"}